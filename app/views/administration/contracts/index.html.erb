<% content_for :breadcrumbs do %>
<ul class="breadcrumb">
  <li>
    <i class="icon-home"></i>
    <%= link_to "Administration", administration_users_path %>
    <span class="divider">/</span>
  </li>
  <li class="active">
    <%= link_to "Tous les contrats", administration_user_contracts_path(@user)%>
  </li>
</ul>
<% end %>

<%= render :partial => 'header', :locals => { :title => "Liste de tous les contrats" }%>

<% if @contracts.empty? %>
  <i class="icon-info-sign valign-middle"></i>Aucun contrats
<% else %>
  <table class="table table-striped table-bordered table-condensed">
    <thead>
      <tr>
        <th>#</th>
        <th>Fichier</th>
        <th>Taille</th>
        <th>Modifié</th>
        <th class="right"><i class="icon-cog valign-text-bottom"></i> Actions</th>
      </tr>
    </thead>
    <tbody>
      <% @contracts.each_with_index do |document, index| %>
        <tr>
          <td><%= "#{index+1}." %></td>
          <td>
            <%#= image_tag(get_image_from_ext(document.file_name)) %>
            <%#= link_to document.file_name.capitalize,
              administration_user_contract_document_path(@user, @contract, document),
              :class => "valign-top" %>
          </td>
          <td><%#= number_to_human_size(document.uploaded_file_file_size) %></td>
          <td>Il y a <%#= distance_of_time_in_words_to_now document.uploaded_file_updated_at %></td>
          <td>
            <div class="btn-group pull-right">
              <%#= link_to raw('<i class="icon-download icon-white"></i>'), admin_download_url(document),
                :class => "btn btn-info btn-mini",
                :title => "Télécharger la version la plus récente du fichier", :rel => "tooltip" %>
              <%#= link_to raw('<i class="icon-eye-open"></i>'),
                administration_user_contract_document_path(@user,@contract,document),
                :class => "btn btn-mini",
                :title => "Voir l'historique du fichier", :rel => "tooltip" %>
              <%#= link_to raw('<i class="icon-edit"></i>'),
                edit_administration_user_contract_document_path(@user, @contract, document),
                :class => "btn btn-mini",
                :title => "Uploader une version plus récente du fichier", :rel => "tooltip" %>
              <%#= link_to raw('<i class="icon-trash icon-white"></i>'),
                administration_user_contract_document_path(@user, @contract, document),
                :method => :delete, :class => "btn btn-danger btn-mini",
                :title => "Supprimer le fichier", :rel => "tooltip",
                :confirm => "Êtes vous sûr de vouloir supprimer le fichier #{document.file_name.capitalize}" %>
            </div>
          </td>
        </tr>
      <% end -%>
    </tbody>
  </table>
<% end %>
<div class="form-actions">
    <%#= link_to raw('<i class="icon-edit"></i> Modifier le contrat'), edit_administration_user_contract_path(@user, @contract), :class => 'btn valign-bottom' %>
    <%#= link_to raw('<i class="icon-plus-sign"></i> Ajouter un fichier'), new_administration_user_contract_document_path(@user,@contract), :class => "btn" %>
    <%#= link_to raw('<i class="icon-ban-circle"></i> Retour'), administration_user_path(@user), :class => 'btn pull-right'  %>
</div>
