<% content_for :right_pane do %>
  <span style="display:none;"></span>
<% end %>
<% content_for :breadcrumbs do %>
<ul class="breadcrumb">
  <li class="active">
    <%= link_to "Administration", administration_users_path%>
  </li>
</ul>
<% end %>

<div class="page-header">
  <h1>Liste des clients
    <%= link_to "Nouveau Client", new_administration_user_path, :class => "btn btn-primary pull-right" %>
  </h1>
</div>
<table class="table table-striped table-bordered table-condensed">
  <thead>
    <tr>
      <td>Name</td>
      <td># Contrats</td>
      <td># Fichiers</td>
      <td>Espace disque</td>
      <td>Connection</td>
      <td>Actions</td>
    </tr>
  </thead>
  <tbody>
    <% @users.each do |user| %>
      <tr>
        <td>
          <%= print_upto( ((user.firstname && user.lastname).nil?  ? user.email : "#{user.firstname.capitalize} #{user.lastname.upcase}"), 30) %>
        </td>
        <td><%= user.contracts.size %></td>
        <td><%= user.file_number %></td>
        <td><%= number_to_human_size user.disk_space %></td>
        <td></td>
        <td>
          <div class="btn-group pull-right">
            <%= link_to 'Voir', administration_user_path(user), :class => "btn btn-mini" %>
            <%= link_to 'Modifier', edit_administration_user_path(user), :class => "btn btn-mini" %>
            <%= link_to 'Supprimer', administration_user_path(user), :method => :delete, :confirm => 'Êtes vous sûr ?', :class => "btn btn-danger btn-mini" %>
          </div>
        </td>
      </tr>
    <% end -%>
  </tbody>
</table>
